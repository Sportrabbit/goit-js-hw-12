{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getPhotos(userRequest, currentPage) {\n    const API_KEY = '42321228-2dc7965d40466a0a646776a28';\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINTS = '/api/';\n    const url = BASE_URL + END_POINTS;\n\n    const params = {\n        key: API_KEY,\n        q: userRequest,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        per_page: 15,\n        page: currentPage,\n    };\n\n    const response = await axios.get(url, {params});\n    \n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\n\nlet lightBox;\n\nexport const refs = {\n    formElem: document.querySelector('.form'),\n    input: document.querySelector('.input-search'),\n    button: document.querySelector('.button'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    buttonLoader: document.querySelector('.btn-more'),\n};\n\nexport function photosTemplate(photos) {\n    return photos\n    .map(data => {\n        return `\n        <li class=\"gallery-item\"><a href=\"${data.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\"></a>\n            <div class=\"info\">\n            <p> <span class=\"info-text\">Likes</span> <br/> ${data.likes}</p>\n            <p><span class=\"info-text\">Views</span> <br/> ${data.views}</p>\n            <p><span class=\"info-text\">Comments</span> <br/> ${data.comments}</p>\n            <p><span class=\"info-text\">Downloads</span> <br/> ${data.downloads}</p>\n            </div>\n            </li>\n        `;\n    })\n    .join();\n};\n\nexport function renderPhotos(photos) {\n    const markup = photosTemplate(photos);\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (typeof LightBox !== 'undefined') {\n        lightBox.refresh();\n    } else {\n        lightBox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n    }\n}","'use strict'\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-functions';\nimport { refs } from './js/render-functions';\n\nclass FormHandler {\n    constructor() {\n        this.userInput = '';\n        this.page = 1;\n        this.maxPage = undefined;\n    }\n\n    async onFormSubmit(e) {\n        e.preventDefault();\n        this.clearGallery();\n        this.page = 1;\n        this.userInput = refs.input.value.trim();\n\n        if ( this.userInput === '') {\n            iziToast.error({\n                message: 'Please enter a search query.',\n                position: 'topRight',\n                transitionIn: 'fadeInLeft',\n            });\n            return;\n        }\n\n        refs.gallery.innerHTML = '';\n        this.showLoader();\n        this.hideLoadBtn();\n\n        try {\n            const data = await getPhotos(this.userInput, this.page);\n            this.maxPage = Math.ceil(data.totalResults / 15);\n            if (data.results.length === 0) {\n                this.hideLoader();\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                    transitionIn: 'fadeInLeft',\n                });\n            } else {\n                renderPhotos(data.results);\n            }\n        } catch (err) {\n            iziToast.error({\n                message: err.message || 'An error occurred. Please try again later.',\n                position: 'topRight',\n                transitionIn: 'fadeInLeft',\n            });\n        }\n        this.hideLoader();\n        this.checkBtnStatus();\n        e.target.reset();\n    }\n\n    async onloadMore() {\n        this.page += 1;\n        this.showLoader();\n        const data = await getPhotos();\n        renderPhotos(data.results);\n        hideLoader();\n        window.scrollBy({\n          top: height * 2,\n          behavior: 'smooth',\n        });\n    }\n\n    showLoadBtn() {\n        refs.buttonLoader.classList.remove('hidden')\n    }\n\n    hideLoadBtn() {\n        refs.buttonLoader.classList.add('hidden')\n    }\n\n    showLoader() {\n        refs.loader.classList.remove('hidden');\n    }\n      \n    hideLoader() {\n        refs.loader.classList.add('hidden');\n    }\n\n    clearGallery() {\n        refs.gallery.innerHTML = '';\n    }\n\n    checkBtnStatus() {\n        if (this.page >= this.maxPage) {\n            this.hideLoadBtn();\n            this.hideLoader();\n            iziToast.show({\n                message: `We're sorry, but you've reached the end of search results.`,\n                position: 'topRight',\n                color: 'blue',\n                transitionIn: 'fadeInLeft'\n            });\n        } else {\n          refs.btnLoadMore.classList.remove('hidden');\n        }\n      }\n}\n\nconst formHandler = new FormHandler();\nrefs.form.addEventListener('submit', e => formHandler.onFormSubmit(e));\nrefs.buttonLoader.addEventListener('click', () =>\nformHandler.loadMore()\n);"],"names":["getPhotos","userRequest","currentPage","API_KEY","url","params","axios","lightBox","refs","photosTemplate","photos","data","renderPhotos","markup","SimpleLightbox","FormHandler","iziToast","err","formHandler","e"],"mappings":"+vBAEO,eAAeA,EAAUC,EAAaC,EAAa,CACtD,MAAMC,EAAU,qCAGVC,EAFW,sBACE,QAGbC,EAAS,CACX,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,SAAU,GACV,KAAMC,CACd,EAII,OAFiB,MAAMI,EAAM,IAAIF,EAAK,CAAC,OAAAC,CAAM,CAAC,GAE9B,IACpB,CClBA,IAAIE,EAEG,MAAMC,EAAO,CAChB,SAAU,SAAS,cAAc,OAAO,EACxC,MAAO,SAAS,cAAc,eAAe,EAC7C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,aAAc,SAAS,cAAc,WAAW,CACpD,EAEO,SAASC,EAAeC,EAAQ,CACnC,OAAOA,EACN,IAAIC,GACM;AAAA,4CAC6BA,EAAK,aAAa;AAAA,8CAChBA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA,6DAErBA,EAAK,KAAK;AAAA,4DACXA,EAAK,KAAK;AAAA,+DACPA,EAAK,QAAQ;AAAA,gEACZA,EAAK,SAAS;AAAA;AAAA;AAAA,SAIzE,EACA,MACL,CAEO,SAASC,EAAaF,EAAQ,CACjC,MAAMG,EAASJ,EAAeC,CAAM,EACpCF,EAAK,QAAQ,mBAAmB,YAAaK,CAAM,EAE/C,OAAO,SAAa,IACpBN,EAAS,QAAO,EAEhBA,EAAW,IAAIO,EAAe,aAAc,CACxC,aAAc,MACd,aAAc,GAC1B,CAAS,CAET,CCjCA,MAAMC,CAAY,CACd,aAAc,CACV,KAAK,UAAY,GACjB,KAAK,KAAO,EACZ,KAAK,QAAU,MAClB,CAED,MAAM,aAAa,EAAG,CAMlB,GALA,EAAE,eAAc,EAChB,KAAK,aAAY,EACjB,KAAK,KAAO,EACZ,KAAK,UAAYP,EAAK,MAAM,MAAM,KAAI,EAEjC,KAAK,YAAc,GAAI,CACxBQ,EAAS,MAAM,CACX,QAAS,+BACT,SAAU,WACV,aAAc,YAC9B,CAAa,EACD,MACH,CAEDR,EAAK,QAAQ,UAAY,GACzB,KAAK,WAAU,EACf,KAAK,YAAW,EAEhB,GAAI,CACA,MAAMG,EAAO,MAAMX,EAAU,KAAK,UAAW,KAAK,IAAI,EACtD,KAAK,QAAU,KAAK,KAAKW,EAAK,aAAe,EAAE,EAC3CA,EAAK,QAAQ,SAAW,GACxB,KAAK,WAAU,EACfK,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,aAAc,YAClC,CAAiB,GAEDJ,EAAaD,EAAK,OAAO,CAEhC,OAAQM,EAAK,CACVD,EAAS,MAAM,CACX,QAASC,EAAI,SAAW,6CACxB,SAAU,WACV,aAAc,YAC9B,CAAa,CACJ,CACD,KAAK,WAAU,EACf,KAAK,eAAc,EACnB,EAAE,OAAO,OACZ,CAED,MAAM,YAAa,CACf,KAAK,MAAQ,EACb,KAAK,WAAU,EACf,MAAMN,EAAO,MAAMX,IACnBY,EAAaD,EAAK,OAAO,EACzB,aACA,OAAO,SAAS,CACd,IAAK,OAAS,EACd,SAAU,QACpB,CAAS,CACJ,CAED,aAAc,CACVH,EAAK,aAAa,UAAU,OAAO,QAAQ,CAC9C,CAED,aAAc,CACVA,EAAK,aAAa,UAAU,IAAI,QAAQ,CAC3C,CAED,YAAa,CACTA,EAAK,OAAO,UAAU,OAAO,QAAQ,CACxC,CAED,YAAa,CACTA,EAAK,OAAO,UAAU,IAAI,QAAQ,CACrC,CAED,cAAe,CACXA,EAAK,QAAQ,UAAY,EAC5B,CAED,gBAAiB,CACT,KAAK,MAAQ,KAAK,SAClB,KAAK,YAAW,EAChB,KAAK,WAAU,EACfQ,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,WACV,MAAO,OACP,aAAc,YAC9B,CAAa,GAEHR,EAAK,YAAY,UAAU,OAAO,QAAQ,CAE7C,CACP,CAEA,MAAMU,EAAc,IAAIH,EACxBP,EAAK,KAAK,iBAAiB,SAAUW,GAAKD,EAAY,aAAaC,CAAC,CAAC,EACrEX,EAAK,aAAa,iBAAiB,QAAS,IAC5CU,EAAY,SAAU,CACtB"}